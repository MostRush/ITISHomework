using System;
using System.Text.RegularExpressions;

namespace RegexForDateTime
{
    class Program
    {
        /*
         * 02/12/1975 00:00
         * 02/12/1979 00:00
         * 02/12/1238 23:11
         */

        static void Main(string[] args)
        {
            Regex regex = null;
            string dateTime = null;

            do
            {
                Console.Clear();
                Console.Write("\n\tВведите время в формате [mm/dd/yyyy hh:mm]: ");

                dateTime = Console.ReadLine();

                regex = new Regex(@"\b(03\/06\/1237 (((1[2-9]|2[0-3]):[0-5][0-9])|24:00))|(03\/(0[7-9]|1[0-9]|2[0-9]|3[01])\/1237 ((([01][0-9]|2[0-3]):[0-5][0-9])|24:00))|((0[469]|11)\/(0[1-9]|1[0-9]|2[0-9]|30)\/1237 ((([01][0-9]|2[0-3]):[0-5][0-9])|24:00))|((0[578]|1[02])\/(0[1-9]|1[0-9]|2[0-9]|3[01])\/1237 ((([01][0-9]|2[0-3]):[0-5][0-9])|24:00))|((0[13578]|1[02])\/(0[1-9]|1[0-9]|2[0-9]|3[01])\/(123[8-9]|12[4-9][0-9]|1[3-8][0-9]{2}|19[0-6][0-9]|197[0-7]) ((([01][0-9]|2[0-3]):[0-5][0-9])|24:00))|((0[469]|11)\/(0[1-9]|1[0-9]|2[0-9]|30)\/(123[8-9]|12[4-9][0-9]|1[3-8][0-9]{2}|19[0-6][0-9]|197[0-7]) ((([01][0-9]|2[0-3]):[0-5][0-9])|24:00))|(02\/(0[1-9]|1[0-9]|2[0-8])\/(123[8-9]|12[4-9][0-9]|1[3-8][0-9]{2}|19[0-6][0-9]|197[0-7])) ((([01][0-9]|2[0-3]):[0-5][0-9])|24:00)|(02\/29\/((((1[3-8])(04|08|[02468][048]|[13579][26])))|(((12)([468][048]|[3579]6)))|((((19)(04|08|[246][048]|[1357][26]))))) ((([01][0-9]|2[0-3]):[0-5][0-9])|24:00))|(0[12]\/(0[1-9]|1[0-9]|2[0-7])\/1978 ((([01][0-9]|20]):[0-5][0-9])|(21:([0-2][0-9]|3[0-5]))))\b");

            } while (!regex.IsMatch(dateTime));

            Console.ForegroundColor = ConsoleColor.Green;
            Console.WriteLine("\n\tPassed");
            Console.ResetColor();

            Console.ReadKey();
        }
    }
}
